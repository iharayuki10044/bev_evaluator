<?xml version="1.0"?>
<launch>
    <arg name="threhold_of_distance_btw_pc_and_person" default="0.35"/>
    <arg name="range" default="10.0"/>
    <arg name="grid_num" default="1600"/>
    <arg name="grid_width" default="30"/>
	<arg name="people_num" default="10"/>
    <arg name="flow_image_size" default="50"/>
    <arg name="hz" default="1.0"/>
    <arg name="image_hz" default="100.0"/>
    <arg name="is_save_image" default="false"/>
    <arg name="save_data_num" default="1"/>
	<arg name="pkg_path" default="/home/amsl/ros_catkin_ws/src/bev_evaluator/bev_img"/>

	<arg name="width" default="50.0"/>
    <arg name="resolution" default="0.2"/>
    <arg name="occupancy_threshold" default="0.2"/>
    <arg name="beam_num" default="720"/>
    <arg name="skip_scan_flag" default="false"/>

	<param name="use_sim_time" value="true"/>

	<node pkg="bev_evaluator" type="bev_evaluator" name="bev_evaluator" output="screen">
        <param name="THREHOLD_OF_DISTANCE_BTW_PC_AND_PERSON" value="$(arg threhold_of_distance_btw_pc_and_person)" type="double"/>
		<param name="RANGE" value="$(arg range)" type="double"/>
		<param name="GRID_NUM" value="$(arg grid_num)" type="int"/>
        <param name="GRID_WIDTH" value="$(arg grid_width)" type="int"/>
		<param name="PEOPLE_NUM" value="$(arg people_num)" type="int"/>
		<param name="FLOW_IMAGE_SIZE" value="$(arg flow_image_size)" type="int"/>
		<param name="Hz" value="$(arg hz)" type="double"/>
		<param name="SAVE_NUMBER" value="$(arg save_data_num)" type="int"/>

        <param name="WIDTH" value="3" type="double"/>
        <!-- <rosparam command="load" file="$(find cats)/config/cats_motion_param.yaml"/> -->
	</node>

    <node pkg="dynamic_cloud_detector" type="dynamic_cloud_detector" name="dynamic_cloud_detector">
        <param name="WIDTH" value="$(arg width)"/>
        <param name="RESOLUTION" value="$(arg resolution)"/>
        <param name="OCCUPANCY_THRESHOLD" value="$(arg occupancy_threshold)"/>
        <param name="BEAM_NUM" value="$(arg beam_num)"/>
        <param name="SKIP_SCAN_FLAG" value="$(arg skip_scan_flag)"/>
		<remap from="/odom/complement" to="/odom"/>
    </node>

	<!-- optional -->
	<!-- <include file="$(find bev_evaluator)/launch/bag_player.launch"/> -->
	<include file="$(find velodyne_height_map)/launch/amsl_velodyne_heightmap.launch"/>
	<include file="$(find velodyne_pointcloud)/launch/32e_points.launch"/>

</launch>
